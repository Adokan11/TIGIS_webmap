<!DOCTYPE html>
<html lang = 'en'>
<head>
    <meta charset = 'UTF-8'>
    <meta name = 'viewport' content = 'width = device-width, initial-scale = 1.0'>
    <title>TIGIS temp </title>
    <link rel = 'stylesheet' href = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.css'/>
    <link rel = 'stylesheet' href = '{{ url_for("static", filename = "main.css") }}'>
</head>
<body>
    <!-- Layer Controls -->
    <div class = 'controls'>
        <h2>TIGIS temp</h2>
        <p>Green space temp temp temp temp temp temp temp temp temp temp temp temp temp </p>
        
        <section>
            <h3>Layers</h3>
            <div id = 'layer-controls'>
                {% for layer in layers %}
                    {% if layer == 'buffers' %}
                    <label class = 'layer-indent' id = 'buffers-toggle'>
                        <input type = 'checkbox' onclick = 'toggle("{{ layer }}")' data-layer = '{{ layer }}'>
                        <span class = 'layer-label' data-layer = '{{ layer }}'></span>
                    </label>
                    {% elif layer == 'spaces' %}
                    <label>
                        <input type = 'checkbox' onclick = 'toggleSpaces()' data-layer = '{{ layer }}'>
                        <span class = 'layer-label' data-layer = '{{ layer }}'></span>
                    </label>
                    <h4 style = 'margin-bottom: 5px; margin-top: 5px; display: none;' id = 'types-heading'>Types:</h4>
                    {% for space_type in space_types %}
                    <label class = 'layer-indent space-type'>
                        <input type = 'checkbox' onclick = 'toggleSpaceType("{{ space_type }}")' data-type = '{{ space_type }}'>
                        <span>{{ space_type }}</span>
                    </label>
                    {% endfor %}
                    {% else %}
                    <label>
                        <input type = 'checkbox' onclick = 'toggle("{{ layer }}")' data-layer = '{{ layer }}'>
                        <span class = 'layer-label' data-layer = '{{ layer }}'></span>
                    </label>
                    {% if layer == 'sites' %}
                    <label class = 'layer-indent' id = 'rank-coloring-toggle' style = 'display: none;'>
                        <input type = 'checkbox' id = 'rank-coloring-checkbox' onclick = 'toggleRankColoring()'>
                        <span style = 'color: #882255; font-weight: bold;'>Color by Rank</span>
                    </label>
                    <div id = 'rank-colorbar-container' class = 'layer-indent' style = 'display: none; margin-bottom: 10px;'>
                        <div class = 'rank-colorbar' id = 'rank-colorbar'></div>
                        <div class = 'rank-legend'>
                            <span>Worst (65)</span>
                            <span>Best (1)</span>
                        </div>
                    </div>
                    {% endif %}
                    {% endif %}
                {% endfor %}
            </div>
        </section>
        
        <section>
            <h3>Find Sites</h3>
            <h4 style = 'margin-bottom: 10px'>Filters</h4>
            
            <h5 style = 'margin-bottom: 5px; margin-top: 5px; color: #882255'>Final Score:</h5>
            <div style = 'display: flex; gap: 10px; margin-bottom: 10px;'>
                <div style = 'flex: 1;'>
                    <label for = 'score-min' style = 'font-weight: normal;'>Min: <span id = 'min-value'>0.00</span></label>
                    <input type = 'range' id = 'score-min' min = '0' max = '1' step = '0.01' value = '0' oninput = 'updateScoreFilter()'>
                </div>
                <div style = 'flex: 1;'>
                    <label for = 'score-max' style = 'font-weight: normal;'>Max: <span id = 'max-value'>1.00</span></label>
                    <input type = 'range' id = 'score-max' min = '0' max = '1' step = '0.01' value = '1' oninput = 'updateScoreFilter()'>
                </div>
            </div>
            
            <h5 style = 'margin-bottom: 5px; margin-top: 5px; color: #332288'>Buffer's Population:</h5>
            <div style = 'display: flex; gap: 10px; margin-bottom: 10px;'>
                <div style = 'flex: 1;'>
                    <label for = 'pop-min' style = 'font-weight: normal;'>Min: <span id = 'pop-min-value'>0</span></label>
                    <input type = 'range' id = 'pop-min' min = '0' max = '30000' step = '200' value = '0' oninput = 'updatePopulationFilter()'>
                </div>
                <div style = 'flex: 1;'>
                    <label for = 'pop-max' style = 'font-weight: normal;'>Max: <span id = 'pop-max-value'>30000</span></label>
                    <input type = 'range' id = 'pop-max' min = '0' max = '30000' step = '200' value = '30000' oninput = 'updatePopulationFilter()'>
                </div>
            </div>
            <button onclick = 'resetScoreFilter()' class = 'secondary'>Reset Filters</button>
            <br></br>
            <input type = 'text' id = 'site-search' placeholder = 'Search by name'>
            <button onclick = 'searchSites()'>Search</button>
        </section>
    </div>
    
    <!-- Site Details Panel -->
    <div class = 'site-details' id = 'site-details'>
        <span class = 'close-btn' onclick = 'clearSelection()'>&times;</span>
        <div id = 'details-content'></div>
    </div>
    
    <!-- Map -->
    <div id = 'map'></div>
    
    <script src = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.js'></script>
    <script src = '{{ url_for("static", filename = "main.js") }}'></script>
</body>
</html>